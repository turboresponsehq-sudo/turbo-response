{
  "query": "-- Phase 2: RAG System - PostgreSQL JSON Vector Storage\n\nCREATE TABLE IF NOT EXISTS brain_embeddings (\n  id SERIAL PRIMARY KEY,\n  \n  -- Link to source document\n  document_id INTEGER NOT NULL REFERENCES brain_documents(id) ON DELETE CASCADE,\n  \n  -- Chunk information\n  chunk_index INTEGER NOT NULL,\n  chunk_text TEXT NOT NULL,\n  chunk_tokens INTEGER,\n  \n  -- Vector embedding stored as JSON array (1536 dimensions)\n  embedding JSON NOT NULL,\n  \n  -- Metadata for search and filtering\n  document_title TEXT,\n  document_domain VARCHAR(100),\n  document_category VARCHAR(100),\n  document_tags TEXT,\n  \n  -- Timestamps\n  created_at TIMESTAMP DEFAULT NOW(),\n  \n  -- Composite unique constraint\n  UNIQUE(document_id, chunk_index)\n);\n\n-- Create indexes for fast filtering\nCREATE INDEX IF NOT EXISTS idx_embeddings_document ON brain_embeddings(document_id);\nCREATE INDEX IF NOT EXISTS idx_embeddings_domain ON brain_embeddings(document_domain);\nCREATE INDEX IF NOT EXISTS idx_embeddings_category ON brain_embeddings(document_category);\n\n-- Add comments\nCOMMENT ON TABLE brain_embeddings IS 'Vector embeddings for semantic search (PostgreSQL JSON storage)';\nCOMMENT ON COLUMN brain_embeddings.embedding IS 'OpenAI text-embedding-3-small vector stored as JSON array (1536 floats)';",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 7DorTNURquHZQZu.root --database WQoqrgvAJmZqDJX9hYJoWw --execute -- Phase 2: RAG System - PostgreSQL JSON Vector Storage\n\nCREATE TABLE IF NOT EXISTS brain_embeddings (\n  id SERIAL PRIMARY KEY,\n  \n  -- Link to source document\n  document_id INTEGER NOT NULL REFERENCES brain_documents(id) ON DELETE CASCADE,\n  \n  -- Chunk information\n  chunk_index INTEGER NOT NULL,\n  chunk_text TEXT NOT NULL,\n  chunk_tokens INTEGER,\n  \n  -- Vector embedding stored as JSON array (1536 dimensions)\n  embedding JSON NOT NULL,\n  \n  -- Metadata for search and filtering\n  document_title TEXT,\n  document_domain VARCHAR(100),\n  document_category VARCHAR(100),\n  document_tags TEXT,\n  \n  -- Timestamps\n  created_at TIMESTAMP DEFAULT NOW(),\n  \n  -- Composite unique constraint\n  UNIQUE(document_id, chunk_index)\n);\n\n-- Create indexes for fast filtering\nCREATE INDEX IF NOT EXISTS idx_embeddings_document ON brain_embeddings(document_id);\nCREATE INDEX IF NOT EXISTS idx_embeddings_domain ON brain_embeddings(document_domain);\nCREATE INDEX IF NOT EXISTS idx_embeddings_category ON brain_embeddings(document_category);\n\n-- Add comments\nCOMMENT ON TABLE brain_embeddings IS 'Vector embeddings for semantic search (PostgreSQL JSON storage)';\nCOMMENT ON COLUMN brain_embeddings.embedding IS 'OpenAI text-embedding-3-small vector stored as JSON array (1536 floats)';",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 36: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 1 column 7 near \"COMMENT ON TABLE brain_embeddings IS 'Vector embeddings for semantic search (PostgreSQL JSON storage)'\""
  ]
}